{"openapi":"3.0.0","info":{"title":"mpak API","description":"API documentation for the mpak backend server","version":"0.1.0"},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{}},"paths":{"/v1/bundles/search":{"get":{"tags":["bundles"],"description":"Search for bundles","parameters":[{"schema":{"type":"string"},"in":"query","name":"q","required":false,"description":"Search query"},{"schema":{"type":"string"},"in":"query","name":"type","required":false,"description":"Filter by server type"},{"schema":{"type":"string","enum":["downloads","recent","name"],"default":"downloads"},"in":"query","name":"sort","required":false},{"schema":{"type":"number","default":20,"maximum":100},"in":"query","name":"limit","required":false},{"schema":{"type":"number","default":0},"in":"query","name":"offset","required":false}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"bundles":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}]},"description":{"anyOf":[{"type":"string"},{"type":"null"}]},"author":{"anyOf":[{"type":"object","properties":{"name":{"type":"string"}},"required":["name"],"additionalProperties":false},{"type":"null"}]},"latest_version":{"type":"string"},"icon":{"anyOf":[{"type":"string"},{"type":"null"}]},"server_type":{"anyOf":[{"type":"string"},{"type":"null"}]},"tools":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}},"required":["name"],"additionalProperties":false}},"downloads":{"type":"number"},"published_at":{"anyOf":[{"type":"string"},{}]},"verified":{"type":"boolean"},"provenance":{"anyOf":[{"type":"object","properties":{"schema_version":{"type":"string"},"provider":{"type":"string"},"repository":{"type":"string"},"sha":{"type":"string"}},"required":["schema_version","provider","repository","sha"],"additionalProperties":false},{"type":"null"}]}},"required":["name","latest_version","downloads","published_at","verified"],"additionalProperties":false}},"total":{"type":"number"},"pagination":{"type":"object","properties":{"limit":{"type":"number"},"offset":{"type":"number"},"has_more":{"type":"boolean"}},"required":["limit","offset","has_more"],"additionalProperties":false}},"required":["bundles","total","pagination"],"additionalProperties":false}}}}}}},"/v1/bundles/@{scope}/{package}":{"get":{"tags":["bundles"],"description":"Get detailed bundle information","parameters":[{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"package","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"display_name":{"anyOf":[{"type":"string"},{"type":"null"}]},"description":{"anyOf":[{"type":"string"},{"type":"null"}]},"author":{"anyOf":[{"type":"object","properties":{"name":{"type":"string"}},"required":["name"],"additionalProperties":false},{"type":"null"}]},"latest_version":{"type":"string"},"icon":{"anyOf":[{"type":"string"},{"type":"null"}]},"server_type":{"anyOf":[{"type":"string"},{"type":"null"}]},"tools":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"}},"required":["name"],"additionalProperties":false}},"downloads":{"type":"number"},"published_at":{"anyOf":[{"type":"string"},{}]},"verified":{"type":"boolean"},"provenance":{"anyOf":[{"type":"object","properties":{"schema_version":{"type":"string"},"provider":{"type":"string"},"repository":{"type":"string"},"sha":{"type":"string"}},"required":["schema_version","provider","repository","sha"],"additionalProperties":false},{"type":"null"}]},"homepage":{"anyOf":[{"type":"string"},{"type":"null"}]},"license":{"anyOf":[{"type":"string"},{"type":"null"}]},"versions":{"type":"array","items":{"type":"object","properties":{"version":{"type":"string"},"published_at":{"anyOf":[{"type":"string"},{}]},"downloads":{"type":"number"}},"required":["version","published_at","downloads"],"additionalProperties":false}}},"required":["name","latest_version","downloads","published_at","verified","versions"],"additionalProperties":false}}}}}}},"/v1/bundles/@{scope}/{package}/badge.svg":{"get":{"tags":["bundles"],"description":"Get an SVG badge for a bundle (for README embeds)","parameters":[{"schema":{"type":"string","enum":["version","downloads","runtime"],"default":"version"},"in":"query","name":"type","required":false,"description":"Badge type: version (default), downloads, or runtime"},{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"package","required":true}],"responses":{"200":{"description":"SVG badge image","content":{"application/json":{"schema":{"type":"string","description":"SVG badge image"}}}}}}},"/v1/bundles/@{scope}/{package}/index.json":{"get":{"tags":["bundles"],"description":"Get multi-platform distribution index for a bundle (MCPB Index spec)","parameters":[{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"package","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"index_version":{"type":"string"},"mimeType":{"type":"string"},"name":{"type":"string"},"version":{"type":"string"},"description":{"anyOf":[{"type":"string"},{"type":"null"}]},"bundles":{"type":"array","items":{"type":"object","properties":{"mimeType":{"anyOf":[{"type":"string"},{"type":"null"}]},"digest":{"type":"string"},"size":{"type":"number"},"platform":{"type":"object","properties":{"os":{"type":"string"},"arch":{"type":"string"}},"required":["os","arch"],"additionalProperties":false},"urls":{"type":"array","items":{"type":"string"}}},"required":["mimeType","digest","size","platform","urls"],"additionalProperties":false}},"annotations":{"type":"object","propertyNames":{"type":"string"},"additionalProperties":{"type":"string"}}},"required":["index_version","mimeType","name","version","description","bundles"],"additionalProperties":false}}}}}}},"/v1/bundles/@{scope}/{package}/versions":{"get":{"tags":["bundles"],"description":"List all versions of a bundle","parameters":[{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"package","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"latest":{"type":"string"},"versions":{"type":"array","items":{"type":"object","properties":{"version":{"type":"string"},"artifacts_count":{"type":"number"},"platforms":{"type":"array","items":{"type":"object","properties":{"os":{"type":"string"},"arch":{"type":"string"}},"required":["os","arch"],"additionalProperties":false}},"published_at":{"anyOf":[{"type":"string"},{}]},"downloads":{"type":"number"},"publish_method":{"anyOf":[{"type":"string"},{"type":"null"}]},"provenance":{"anyOf":[{"type":"object","properties":{"schema_version":{"type":"string"},"provider":{"type":"string"},"repository":{"type":"string"},"sha":{"type":"string"}},"required":["schema_version","provider","repository","sha"],"additionalProperties":false},{"type":"null"}]}},"required":["version","artifacts_count","platforms","published_at","downloads","publish_method"],"additionalProperties":false}}},"required":["name","latest","versions"],"additionalProperties":false}}}}}}},"/v1/bundles/@{scope}/{package}/versions/{version}":{"get":{"tags":["bundles"],"description":"Get information about a specific version","parameters":[{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"package","required":true},{"schema":{"type":"string"},"in":"path","name":"version","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"published_at":{"anyOf":[{"type":"string"},{}]},"downloads":{"type":"number"},"artifacts":{"type":"array","items":{"type":"object","properties":{"platform":{"type":"object","properties":{"os":{"type":"string"},"arch":{"type":"string"}},"required":["os","arch"],"additionalProperties":false},"digest":{"type":"string"},"size":{"type":"number"},"download_url":{"type":"string"},"source_url":{"type":"string"}},"required":["platform","digest","size","download_url"],"additionalProperties":false}},"manifest":{"type":"object","propertyNames":{"type":"string"},"additionalProperties":{}},"release":{"type":"object","properties":{"tag":{"anyOf":[{"type":"string"},{"type":"null"}]},"url":{"anyOf":[{"type":"string"},{"type":"null"}]}},"required":["tag","url"],"additionalProperties":false},"publish_method":{"anyOf":[{"type":"string"},{"type":"null"}]},"provenance":{"anyOf":[{"type":"object","properties":{"schema_version":{"type":"string"},"provider":{"type":"string"},"repository":{"type":"string"},"sha":{"type":"string"}},"required":["schema_version","provider","repository","sha"],"additionalProperties":false},{"type":"null"}]}},"required":["name","version","published_at","downloads","artifacts","manifest","publish_method","provenance"],"additionalProperties":false}}}}}}},"/v1/bundles/@{scope}/{package}/versions/{version}/download":{"get":{"tags":["bundles"],"description":"Download a specific version of a bundle","parameters":[{"schema":{"type":"string"},"in":"query","name":"os","required":false,"description":"Target OS (darwin, linux, win32, any)"},{"schema":{"type":"string"},"in":"query","name":"arch","required":false,"description":"Target arch (x64, arm64, any)"},{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"package","required":true},{"schema":{"type":"string"},"in":"path","name":"version","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string"},"bundle":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"platform":{"type":"object","properties":{"os":{"type":"string"},"arch":{"type":"string"}},"required":["os","arch"],"additionalProperties":false},"sha256":{"type":"string"},"size":{"type":"number"}},"required":["name","version","platform","sha256","size"],"additionalProperties":false},"expires_at":{"type":"string"}},"required":["url","bundle"],"additionalProperties":false}}}},"302":{"description":"Redirect to download URL"}}}},"/v1/bundles/announce":{"post":{"tags":["bundles"],"description":"Announce a single artifact for a bundle version from a GitHub release (OIDC only). Idempotent - can be called multiple times for different artifacts of the same version.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"manifest":{"type":"object","propertyNames":{"type":"string"},"additionalProperties":{}},"release_tag":{"type":"string"},"prerelease":{"default":false,"type":"boolean"},"artifact":{"type":"object","properties":{"filename":{"type":"string"},"os":{"type":"string"},"arch":{"type":"string"},"sha256":{"type":"string"},"size":{"type":"number"}},"required":["filename","os","arch","sha256","size"],"additionalProperties":false}},"required":["name","version","manifest","release_tag","prerelease","artifact"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"package":{"type":"string"},"version":{"type":"string"},"artifact":{"type":"object","properties":{"os":{"type":"string"},"arch":{"type":"string"},"filename":{"type":"string"}},"required":["os","arch","filename"],"additionalProperties":false},"total_artifacts":{"type":"number"},"status":{"type":"string","enum":["created","updated"]}},"required":["package","version","artifact","total_artifacts","status"],"additionalProperties":false}}}}}}},"/v1/skills/search":{"get":{"tags":["skills"],"description":"Search for skills","parameters":[{"schema":{"type":"string"},"in":"query","name":"q","required":false,"description":"Search query"},{"schema":{"type":"string"},"in":"query","name":"tags","required":false,"description":"Filter by tags (comma-separated)"},{"schema":{"type":"string"},"in":"query","name":"category","required":false,"description":"Filter by category"},{"schema":{"type":"string"},"in":"query","name":"surface","required":false,"description":"Filter by surface (claude-code, claude-api, claude-ai)"},{"schema":{"type":"string","enum":["downloads","recent","name"],"default":"downloads"},"in":"query","name":"sort","required":false},{"schema":{"type":"number","default":20,"maximum":100},"in":"query","name":"limit","required":false},{"schema":{"type":"number","default":0},"in":"query","name":"offset","required":false}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"skills":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"latest_version":{"type":"string"},"tags":{"type":"array","items":{"type":"string"}},"category":{"type":"string","enum":["development","writing","research","consulting","data","design","operations","security","other"]},"surfaces":{"type":"array","items":{"type":"string","enum":["claude-code","claude-api","claude-ai"]}},"downloads":{"type":"number"},"published_at":{"type":"string"},"author":{"type":"object","properties":{"name":{"type":"string","minLength":1},"url":{"type":"string","format":"uri"},"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"}},"required":["name"],"additionalProperties":false}},"required":["name","description","latest_version","downloads","published_at"],"additionalProperties":false}},"total":{"type":"number"},"pagination":{"type":"object","properties":{"limit":{"type":"number"},"offset":{"type":"number"},"has_more":{"type":"boolean"}},"required":["limit","offset","has_more"],"additionalProperties":false}},"required":["skills","total","pagination"],"additionalProperties":false}}}}}}},"/v1/skills/@{scope}/{name}":{"get":{"tags":["skills"],"description":"Get detailed skill information","parameters":[{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"name","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"latest_version":{"type":"string"},"license":{"type":"string"},"compatibility":{"type":"string"},"allowed_tools":{"type":"array","items":{"type":"string"}},"tags":{"type":"array","items":{"type":"string"}},"category":{"type":"string","enum":["development","writing","research","consulting","data","design","operations","security","other"]},"triggers":{"type":"array","items":{"type":"string"}},"surfaces":{"type":"array","items":{"type":"string","enum":["claude-code","claude-api","claude-ai"]}},"downloads":{"type":"number"},"published_at":{"type":"string"},"author":{"type":"object","properties":{"name":{"type":"string","minLength":1},"url":{"type":"string","format":"uri"},"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"}},"required":["name"],"additionalProperties":false},"examples":{"type":"array","items":{"type":"object","properties":{"prompt":{"type":"string","minLength":1},"context":{"type":"string"}},"required":["prompt"],"additionalProperties":false}},"versions":{"type":"array","items":{"type":"object","properties":{"version":{"type":"string"},"published_at":{"type":"string"},"downloads":{"type":"number"}},"required":["version","published_at","downloads"],"additionalProperties":false}}},"required":["name","description","latest_version","downloads","published_at","versions"],"additionalProperties":false}}}}}}},"/v1/skills/@{scope}/{name}/badge.svg":{"get":{"tags":["skills"],"description":"Get an SVG badge for a skill (for README embeds)","parameters":[{"schema":{"type":"string","enum":["version","downloads"],"default":"version"},"in":"query","name":"type","required":false,"description":"Badge type: version (default) or downloads"},{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"name","required":true}],"responses":{"200":{"description":"SVG badge image","content":{"application/json":{"schema":{"type":"string","description":"SVG badge image"}}}}}}},"/v1/skills/@{scope}/{name}/download":{"get":{"tags":["skills"],"description":"Download the latest version of a skill bundle","parameters":[{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"name","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string"},"skill":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"sha256":{"type":"string"},"size":{"type":"number"}},"required":["name","version","sha256","size"],"additionalProperties":false},"expires_at":{"type":"string"}},"required":["url","skill","expires_at"],"additionalProperties":false}}}},"302":{"description":"Redirect to download URL"}}}},"/v1/skills/@{scope}/{name}/versions/{version}/download":{"get":{"tags":["skills"],"description":"Download a specific version of a skill bundle","parameters":[{"schema":{"type":"string"},"in":"path","name":"scope","required":true},{"schema":{"type":"string"},"in":"path","name":"name","required":true},{"schema":{"type":"string"},"in":"path","name":"version","required":true}],"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"url":{"type":"string"},"skill":{"type":"object","properties":{"name":{"type":"string"},"version":{"type":"string"},"sha256":{"type":"string"},"size":{"type":"number"}},"required":["name","version","sha256","size"],"additionalProperties":false},"expires_at":{"type":"string"}},"required":["url","skill","expires_at"],"additionalProperties":false}}}},"302":{"description":"Redirect to download URL"}}}},"/v1/skills/announce":{"post":{"tags":["skills"],"description":"Announce a skill version from a GitHub release (OIDC only). Idempotent - can be called multiple times.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","pattern":"^@[a-z0-9][a-z0-9-]*\\/[a-z0-9][a-z0-9-]*$"},"version":{"type":"string"},"skill":{"type":"object","properties":{"name":{"type":"string","minLength":1,"maxLength":64,"pattern":"^[a-z][a-z0-9]*(-[a-z0-9]+)*$"},"description":{"type":"string","minLength":1,"maxLength":1024},"license":{"type":"string"},"compatibility":{"type":"string","maxLength":500},"allowed-tools":{"type":"string"},"metadata":{"type":"object","properties":{"tags":{"maxItems":10,"type":"array","items":{"type":"string","maxLength":32}},"category":{"type":"string","enum":["development","writing","research","consulting","data","design","operations","security","other"]},"triggers":{"maxItems":20,"type":"array","items":{"type":"string","maxLength":128}},"keywords":{"maxItems":30,"type":"array","items":{"type":"string","maxLength":32}},"surfaces":{"type":"array","items":{"type":"string","enum":["claude-code","claude-api","claude-ai"]}},"author":{"type":"object","properties":{"name":{"type":"string","minLength":1},"url":{"type":"string","format":"uri"},"email":{"type":"string","format":"email","pattern":"^(?!\\.)(?!.*\\.\\.)([A-Za-z0-9_'+\\-\\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\\-]*\\.)+[A-Za-z]{2,}$"}},"required":["name"],"additionalProperties":false},"version":{"type":"string"},"examples":{"maxItems":5,"type":"array","items":{"type":"object","properties":{"prompt":{"type":"string","minLength":1},"context":{"type":"string"}},"required":["prompt"],"additionalProperties":false}}},"additionalProperties":{}}},"required":["name","description"],"additionalProperties":false},"release_tag":{"type":"string"},"prerelease":{"default":false,"type":"boolean"},"artifact":{"type":"object","properties":{"filename":{"type":"string","pattern":"\\.skill$"},"sha256":{"type":"string","minLength":64,"maxLength":64},"size":{"type":"integer","exclusiveMinimum":0,"maximum":9007199254740991}},"required":["filename","sha256","size"],"additionalProperties":false}},"required":["name","version","skill","release_tag","prerelease","artifact"],"additionalProperties":false}}},"required":true},"responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"skill":{"type":"string"},"version":{"type":"string"},"status":{"type":"string","enum":["created","exists"]}},"required":["skill","version","status"],"additionalProperties":false}}}}}}},"/health":{"get":{"tags":["health"],"description":"Health check endpoint","responses":{"200":{"description":"Default Response","content":{"application/json":{"schema":{"type":"object","properties":{"status":{"type":"string"},"timestamp":{"type":"string","format":"date-time"}}}}}}}}}},"servers":[{"url":"http://localhost:3200","description":"Development server"}],"tags":[{"name":"bundles","description":"Bundle management API"},{"name":"skills","description":"Agent Skills API"},{"name":"health","description":"Health check endpoints"}]}